
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Using NCEI geoportal REST API to collect information about IOOS Regional Association archived data &#8212; The U.S. Integrated Ocean Observing System (IOOS)</title>
    
  <link rel="stylesheet" href="../../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/sphinx-book-theme.c441f2ba0852f4cabcb80105e3a46ae6.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/togglebutton.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/sphinx-book-theme.7d483ff0a819d6edff12ce0b1ead3928.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Near real-time HF-Radar currents in the proximity of the Deepwater Horizon site" href="2017-07-25-HFRadar_currents.html" />
    <link rel="prev" title="Read realtime data from IOOS Sensor Map via ERDDAP tabledap" href="2017-03-21-ERDDAP_IOOS_Sensor_Map.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../index.html">
  
  <img src="../../../_static/IOOS-logo_little.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">The U.S. Integrated Ocean Observing System (IOOS)</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../intro.html">
   IOOS Data Demo Center
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Code Gallery
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="data_access.html">
   Data Access Notebooks
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="2016-10-12-fetching_data.html">
     Fetching data from CO-OPS SOS with Python tools
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2017-05-14-running_compliance_checker.html">
     Shore Station Compliance Checker Script
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2016-12-20-searching_glider_deployments.html">
     Accessing glider data via the Glider DAC API with Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2017-01-18-siphon-explore-thredds.html">
     Exploring the THREDDS catalog with Unidata’s Siphon
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2017-03-21-ERDDAP_IOOS_Sensor_Map.html">
     Read realtime data from IOOS Sensor Map via ERDDAP tabledap
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Using NCEI geoportal REST API to collect information about IOOS Regional Association archived data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2017-07-25-HFRadar_currents.html">
     Near real-time HF-Radar currents in the proximity of the Deepwater Horizon site
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2017-12-15-finding_HFRadar_currents.html">
     Fetching data from a CSW catalog with Python tools
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-03-01-erddapy.html">
     erddapy: a python client/URL builder for ERDDAP
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../data_analysis/data_analysis_and_visualization.html">
   Data Analysis And Visualization Notebooks
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../data_analysis/2016-12-22-boston_light_swim.html">
     The Boston Light Swim temperature analysis with Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_analysis/2020-10-10-GTS.html">
     IOOS GTS Statistics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_analysis/2020-02-14-QARTOD_ioos_qc_Water-Level-Example.html">
     IOOS QARTOD software (ioos_qc)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_analysis/2017-09-09-hurricane_irma.html">
     Exploring the NHC Advisories and Sea Surface Height during Hurricane Irma
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_analysis/2019-02-26-hurricane_gis_part01.html">
     Accessing data from SOS using NHC GIS files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_analysis/2019-05-27-hurricane_gis_part02.html">
     Accessing data from SOS using NHC GIS files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_analysis/2018-12-04-grids.html">
     IOOS models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_analysis/2019-03-08-grids-temperature.html">
     IOOS models: Temperature Horizontal Slices
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_analysis/2018-03-15-ssh-skillscore.html">
     Investigating ocean models skill for sea surface height with IOOS catalog and Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_analysis/2018-03-30-wave_height_assessment.html">
     Coastal Ocean Wave Height Assessment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_analysis/2016-11-15-glider_data_example.html">
     Plotting Glider data with Python tools
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../data_preprocessing/data_publication.html">
   Data Publication
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../data_preprocessing/2016-12-19-exploring_csw.html">
     How to search the IOOS CSW catalog with Python tools
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_preprocessing/2016-11-16-CF-UGRID-SGRID-conventions.html">
     Parsing Conventions and standards with Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_preprocessing/2020-12-08-DataToDwC.html">
     Aligning Data to Darwin Core - Sampling Event with Measurement or Fact using Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_preprocessing/2020-12-08-DataToDwC.html#event-file">
     Event file
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_preprocessing/2020-12-08-DataToDwC.html#occurrence-file">
     Occurrence file
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_preprocessing/2020-12-08-DataToDwC.html#measurement-or-fact">
     Measurement Or Fact
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_preprocessing/2018-02-27-pocean-timeSeries-demo.html">
     Creating a CF-1.6 timeSeries using pocean
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_preprocessing/2017-11-01-Creating-Archives-Using-Bagit.html">
     Using BagIt to tag oceanographic data
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Video Tutorials
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../Video%20Tutorials/ioos.html">
   IOOS
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../Video%20Tutorials/noos.html">
   NANOOS Visualization System (NVS)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../Video%20Tutorials/glos.html">
   GLOS
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../Video%20Tutorials/ooi.html">
   OOI Demonstration Videos
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../Video%20Tutorials/python_dem.html">
   Python Demonstration Videos
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Other Resources
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../Other%20Resources/ioos_installation_conda.html">
   Installing the IOOS Conda Environment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://help.aodn.org.au/aodn-data-tools/user-code-library/">
   Opening netCDF files - hints from AODN
   <i class="fas fa-external-link-alt">
   </i>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="http://unidata.github.io/notebook-gallery/">
   Unidata Ju[yter Notebook Gallery
   <i class="fas fa-external-link-alt">
   </i>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="http://iobis.org/tutorial/">
   Extracting and Enriching OBIS data with R
   <i class="fas fa-external-link-alt">
   </i>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/USGS-R">
   USGS-R Examples
   <i class="fas fa-external-link-alt">
   </i>
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Contact Us
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../contact_us.html">
   Contact Us
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../_sources/content/Code Gallery/data_collection/2017-06-12-NCEI_RA_archive_history.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->


            <!-- Full screen (wrap in <a> to have style consistency -->
            <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                    data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                    title="Fullscreen mode"><i
                        class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/content/Code Gallery/data_collection/2017-06-12-NCEI_RA_archive_history.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/executablebooks/jupyter-book/blob/master/content/Code Gallery/data_collection/2017-06-12-NCEI_RA_archive_history.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i>
            Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ioos-regional-associations-archive-their-non-federal-observational-data-with-noaas-national-center-for-environmental-information-ncei-in-this-notebook-we-will-use-the-restful-services-of-the-ncei-geoportal-to-collect-metadata-from-the-archival-information-packages-found-in-the-ncei-archives-the-metadata-information-are-stored-in-iso-19115-2-xml-files-which-the-ncei-geoportal-uses-for-discovery-of-archival-information-packages-aips-this-example-uses-the-iso-metadata-records-to-display-publication-information-as-well-as-plot-the-time-coverage-of-each-aip-at-ncei-which-meets-the-search-criteria">
   IOOS regional associations archive their non-federal observational data with NOAA’s National Center for Environmental Information (NCEI). In this notebook we will use the RESTful services of the NCEI geoportal to collect metadata from the Archival Information Packages found in the NCEI archives. The metadata information are stored in ISO 19115-2 xml files which the NCEI geoportal uses for discovery of Archival Information Packages (AIPs). This example uses the ISO metadata records to display publication information as well as plot the time coverage of each AIP at NCEI which meets the search criteria.
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#now-we-select-a-regional-association">
   Now we select a Regional Association
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#next-we-generate-a-geoportal-query-and-georss-feed">
   Next we generate a geoportal query and georss feed
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#time-to-query-the-portal-and-parse-out-the-georrs-response">
   Time to query the portal and parse out the georrs response
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lets-plot-up-what-we-have-found">
   Lets plot up what we have found
  </a>
 </li>
</ul>

        </nav>
        
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="using-ncei-geoportal-rest-api-to-collect-information-about-ioos-regional-association-archived-data">
<h1>Using NCEI geoportal REST API to collect information about IOOS Regional Association archived data<a class="headerlink" href="#using-ncei-geoportal-rest-api-to-collect-information-about-ioos-regional-association-archived-data" title="Permalink to this headline">¶</a></h1>
<p>by Mathew Biddle, Faculty Specialist, UMD/ESSIC/CICS at the NOAA National Centers for Environmental Information (NCEI)</p>
<div class="section" id="ioos-regional-associations-archive-their-non-federal-observational-data-with-noaas-national-center-for-environmental-information-ncei-in-this-notebook-we-will-use-the-restful-services-of-the-ncei-geoportal-to-collect-metadata-from-the-archival-information-packages-found-in-the-ncei-archives-the-metadata-information-are-stored-in-iso-19115-2-xml-files-which-the-ncei-geoportal-uses-for-discovery-of-archival-information-packages-aips-this-example-uses-the-iso-metadata-records-to-display-publication-information-as-well-as-plot-the-time-coverage-of-each-aip-at-ncei-which-meets-the-search-criteria">
<h2>IOOS regional associations archive their non-federal observational data with NOAA’s National Center for Environmental Information (NCEI). In this notebook we will use the <a class="reference external" href="https://github.com/Esri/geoportal-server/wiki/REST-API-Syntax">RESTful</a> services of the <a class="reference external" href="https://www.nodc.noaa.gov/archivesearch/catalog/search/search.page">NCEI geoportal</a> to collect metadata from the Archival Information Packages found in the NCEI archives. The metadata information are stored in <a class="reference external" href="https://wiki.earthdata.nasa.gov/display/NASAISO/ISO+19115-2">ISO 19115-2</a> xml files which the NCEI geoportal uses for discovery of Archival Information Packages (AIPs). This example uses the ISO metadata records to display publication information as well as plot the time coverage of each AIP at NCEI which meets the search criteria.<a class="headerlink" href="#ioos-regional-associations-archive-their-non-federal-observational-data-with-noaas-national-center-for-environmental-information-ncei-in-this-notebook-we-will-use-the-restful-services-of-the-ncei-geoportal-to-collect-metadata-from-the-archival-information-packages-found-in-the-ncei-archives-the-metadata-information-are-stored-in-iso-19115-2-xml-files-which-the-ncei-geoportal-uses-for-discovery-of-archival-information-packages-aips-this-example-uses-the-iso-metadata-records-to-display-publication-information-as-well-as-plot-the-time-coverage-of-each-aip-at-ncei-which-meets-the-search-criteria" title="Permalink to this headline">¶</a></h2>
<p>First we import the owslib and numpy package. This allows us to parse the ISO xml records and process the information we gather.</p>
<p>Initialize a counter for plotting and a list to collect the NCEI Accession identifiers (we use this in the plotting routine). Also, update the namespaces dictionary from owslib to include the appropriate namespace reference for gmi and gml.</p>
<p>For more information on ISO Namespaces see:  <a class="reference external" href="https://geo-ide.noaa.gov/wiki/index.php?title=ISO_Namespaces">https://geo-ide.noaa.gov/wiki/index.php?title=ISO_Namespaces</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">owslib.iso</span> <span class="kn">import</span> <span class="n">namespaces</span>

<span class="c1"># Append gmi namespace to namespaces dictionary.</span>
<span class="n">namespaces</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;gmi&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.isotc211.org/2005/gmi&quot;</span><span class="p">})</span>
<span class="n">namespaces</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;gml&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.opengis.net/gml/3.2&quot;</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="now-we-select-a-regional-association">
<h2>Now we select a Regional Association<a class="headerlink" href="#now-we-select-a-regional-association" title="Permalink to this headline">¶</a></h2>
<p>This is where the user identifies the Regional Association they are interested in. Simply uncomment the line that identifies the region of interest. The user can also omit the Regional Association to collect metadata information about all IOOS non-Federal observation data archived through the NCEI-IOOS pipeline.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select RA</span>

<span class="n">RAs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;GLOS&quot;</span><span class="p">:</span> <span class="s2">&quot;Great Lakes Observing System&quot;</span><span class="p">,</span>
    <span class="s2">&quot;SCCOOS&quot;</span><span class="p">:</span> <span class="s2">&quot;Southern California Coastal Ocean Observing System&quot;</span><span class="p">,</span>
    <span class="s2">&quot;SECOORA&quot;</span><span class="p">:</span> <span class="s2">&quot;Southeast Coastal Ocean Observing Regional Association&quot;</span><span class="p">,</span>
    <span class="s2">&quot;PacIOOS&quot;</span><span class="p">:</span> <span class="s2">&quot;Pacific Islands Ocean Observing System&quot;</span><span class="p">,</span>
    <span class="s2">&quot;NANOOS&quot;</span><span class="p">:</span> <span class="s2">&quot;Northwest Association of Networked Ocean Observing Systems&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">ra</span> <span class="o">=</span> <span class="n">RAs</span><span class="p">[</span><span class="s2">&quot;SCCOOS&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="next-we-generate-a-geoportal-query-and-georss-feed">
<h2>Next we generate a geoportal query and georss feed<a class="headerlink" href="#next-we-generate-a-geoportal-query-and-georss-feed" title="Permalink to this headline">¶</a></h2>
<p>To find more information about how to compile a geoportal query, have a look at <a class="reference external" href="https://github.com/Esri/geoportal-server/wiki/REST-API-Syntax">REST API Syntax</a> and the <a class="reference external" href="https://www.nodc.noaa.gov/search/granule/catalog/searchtips/searchtips.page">NCEI Search Tips</a> for the <a class="reference external" href="https://data.nodc.noaa.gov/geoportal/catalog/search/search.page">NCEI geoportal</a>. The example provided is specific to the NCEI-IOOS data pipeline project and only searches for non-federal timeseries data collected by each Regional Association.</p>
<p>The query developed here can be updated to search for any Archival Information Packages at NCEI, therefore the user should develop the appropriate query using the <a class="reference external" href="https://data.nodc.noaa.gov/geoportal/catalog/search/search.page">NCEI Geoportal</a> and update this portion of the code to identify the REST API of interest.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">quote</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">urllib</span> <span class="kn">import</span> <span class="n">quote</span>

<span class="c1"># Generate geoportal query and georss feed.</span>

<span class="c1"># Base geoportal url.</span>
<span class="n">baseurl</span> <span class="o">=</span> <span class="s2">&quot;https://data.nodc.noaa.gov/&quot;</span> <span class="s2">&quot;geoportal/rest/find/document&quot;</span> <span class="s2">&quot;?searchText=&quot;</span>

<span class="c1"># Identify the project.</span>
<span class="n">project</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;dataThemeprojects:&quot;</span>
    <span class="s1">&#39;&quot;Integrated Ocean Observing System &#39;</span>
    <span class="s1">&#39;Data Assembly Centers Data Stewardship Program&quot;&#39;</span>
<span class="p">)</span>

<span class="c1"># Identify the Regional Association</span>
<span class="n">ra</span> <span class="o">=</span> <span class="s1">&#39; AND &quot;</span><span class="si">{}</span><span class="s1">&quot; &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span>

<span class="c1"># Identify the platform.</span>
<span class="n">platform</span> <span class="o">=</span> <span class="s1">&#39;AND &quot;FIXED PLATFORM&quot;&#39;</span>

<span class="c1"># Identify the amount of records and format of the response: 1 to 1010 records.</span>
<span class="n">records</span> <span class="o">=</span> <span class="s2">&quot;&amp;start=1&amp;max=1010&quot;</span>

<span class="c1"># Identify the format of the response: georss.</span>
<span class="n">response_format</span> <span class="o">=</span> <span class="s2">&quot;&amp;f=georss&quot;</span>

<span class="c1"># Combine the URL.</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">baseurl</span><span class="p">,</span> <span class="n">quote</span><span class="p">(</span><span class="n">project</span> <span class="o">+</span> <span class="n">ra</span> <span class="o">+</span> <span class="n">platform</span><span class="p">)</span> <span class="o">+</span> <span class="n">records</span> <span class="o">+</span> <span class="n">response_format</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Identified response format:</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Search page response:</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">response_format</span><span class="p">,</span> <span class="s2">&quot;&amp;f=searchPage&quot;</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Identified response format:
https://data.nodc.noaa.gov/geoportal/rest/find/document?searchText=dataThemeprojects%3A%22Integrated%20Ocean%20Observing%20System%20Data%20Assembly%20Centers%20Data%20Stewardship%20Program%22%20AND%20%22Southern%20California%20Coastal%20Ocean%20Observing%20System%22%20AND%20%22FIXED%20PLATFORM%22&amp;start=1&amp;max=1010&amp;f=georss

Search page response:
https://data.nodc.noaa.gov/geoportal/rest/find/document?searchText=dataThemeprojects%3A%22Integrated%20Ocean%20Observing%20System%20Data%20Assembly%20Centers%20Data%20Stewardship%20Program%22%20AND%20%22Southern%20California%20Coastal%20Ocean%20Observing%20System%22%20AND%20%22FIXED%20PLATFORM%22&amp;start=1&amp;max=1010&amp;f=searchPage
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="time-to-query-the-portal-and-parse-out-the-georrs-response">
<h2>Time to query the portal and parse out the georrs response<a class="headerlink" href="#time-to-query-the-portal-and-parse-out-the-georrs-response" title="Permalink to this headline">¶</a></h2>
<p>Here we are opening the specified REST API and parsing it into a string. Then, since we identified it as a georss xml format above, we parse it using the etree package. We then pull out all the ISO metadata record links and print them out so the user can browse to the metadata record and look for what items they might be interested in.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Query the NCEI Geoportal and parse the georss response.</span>

<span class="kn">from</span> <span class="nn">lxml</span> <span class="kn">import</span> <span class="n">etree</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlopen</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">urllib</span> <span class="kn">import</span> <span class="n">urlopen</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>  <span class="c1"># Open georss response.</span>
<span class="n">url_string</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c1"># Read response into string.</span>

<span class="c1"># Create etree object from georss response.</span>
<span class="n">url_root</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">url_string</span><span class="p">)</span>
<span class="c1"># Find all iso record links.</span>
<span class="n">iso_record</span> <span class="o">=</span> <span class="n">url_root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;channel/item/link&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Found </span><span class="si">%i</span><span class="s2"> records&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">iso_record</span><span class="p">))</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iso_record</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>  <span class="c1"># URL to ISO19115-2 record.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">HTTPError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">4</span><span class="o">-</span><span class="n">d047eb9e8321</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>     <span class="kn">from</span> <span class="nn">urllib</span> <span class="kn">import</span> <span class="n">urlopen</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> 
<span class="ne">---&gt; </span><span class="mi">10</span> <span class="n">f</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>  <span class="c1"># Open georss response.</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span> <span class="n">url_string</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c1"># Read response into string.</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span> 

<span class="nn">~/miniconda3/envs/ioos/lib/python3.6/urllib/request.py</span> in <span class="ni">urlopen</span><span class="nt">(url, data, timeout, cafile, capath, cadefault, context)</span>
<span class="g g-Whitespace">    </span><span class="mi">221</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">222</span>         <span class="n">opener</span> <span class="o">=</span> <span class="n">_opener</span>
<span class="ne">--&gt; </span><span class="mi">223</span>     <span class="k">return</span> <span class="n">opener</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">224</span> 
<span class="g g-Whitespace">    </span><span class="mi">225</span> <span class="k">def</span> <span class="nf">install_opener</span><span class="p">(</span><span class="n">opener</span><span class="p">):</span>

<span class="nn">~/miniconda3/envs/ioos/lib/python3.6/urllib/request.py</span> in <span class="ni">open</span><span class="nt">(self, fullurl, data, timeout)</span>
<span class="g g-Whitespace">    </span><span class="mi">530</span>         <span class="k">for</span> <span class="n">processor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">protocol</span><span class="p">,</span> <span class="p">[]):</span>
<span class="g g-Whitespace">    </span><span class="mi">531</span>             <span class="n">meth</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">processor</span><span class="p">,</span> <span class="n">meth_name</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">532</span>             <span class="n">response</span> <span class="o">=</span> <span class="n">meth</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">533</span> 
<span class="g g-Whitespace">    </span><span class="mi">534</span>         <span class="k">return</span> <span class="n">response</span>

<span class="nn">~/miniconda3/envs/ioos/lib/python3.6/urllib/request.py</span> in <span class="ni">http_response</span><span class="nt">(self, request, response)</span>
<span class="g g-Whitespace">    </span><span class="mi">640</span>         <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">200</span> <span class="o">&lt;=</span> <span class="n">code</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">641</span>             <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
<span class="ne">--&gt; </span><span class="mi">642</span>                 <span class="s1">&#39;http&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">hdrs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">643</span> 
<span class="g g-Whitespace">    </span><span class="mi">644</span>         <span class="k">return</span> <span class="n">response</span>

<span class="nn">~/miniconda3/envs/ioos/lib/python3.6/urllib/request.py</span> in <span class="ni">error</span><span class="nt">(self, proto, *args)</span>
<span class="g g-Whitespace">    </span><span class="mi">562</span>             <span class="n">http_err</span> <span class="o">=</span> <span class="mi">0</span>
<span class="g g-Whitespace">    </span><span class="mi">563</span>         <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="n">proto</span><span class="p">,</span> <span class="n">meth_name</span><span class="p">)</span> <span class="o">+</span> <span class="n">args</span>
<span class="ne">--&gt; </span><span class="mi">564</span>         <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_chain</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">565</span>         <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">566</span>             <span class="k">return</span> <span class="n">result</span>

<span class="nn">~/miniconda3/envs/ioos/lib/python3.6/urllib/request.py</span> in <span class="ni">_call_chain</span><span class="nt">(self, chain, kind, meth_name, *args)</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>         <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">handlers</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">503</span>             <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">meth_name</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">504</span>             <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>             <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">506</span>                 <span class="k">return</span> <span class="n">result</span>

<span class="nn">~/miniconda3/envs/ioos/lib/python3.6/urllib/request.py</span> in <span class="ni">http_error_302</span><span class="nt">(self, req, fp, code, msg, headers)</span>
<span class="g g-Whitespace">    </span><span class="mi">754</span>         <span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">755</span> 
<span class="ne">--&gt; </span><span class="mi">756</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">req</span><span class="o">.</span><span class="n">timeout</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">757</span> 
<span class="g g-Whitespace">    </span><span class="mi">758</span>     <span class="n">http_error_301</span> <span class="o">=</span> <span class="n">http_error_303</span> <span class="o">=</span> <span class="n">http_error_307</span> <span class="o">=</span> <span class="n">http_error_302</span>

<span class="nn">~/miniconda3/envs/ioos/lib/python3.6/urllib/request.py</span> in <span class="ni">open</span><span class="nt">(self, fullurl, data, timeout)</span>
<span class="g g-Whitespace">    </span><span class="mi">530</span>         <span class="k">for</span> <span class="n">processor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">protocol</span><span class="p">,</span> <span class="p">[]):</span>
<span class="g g-Whitespace">    </span><span class="mi">531</span>             <span class="n">meth</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">processor</span><span class="p">,</span> <span class="n">meth_name</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">532</span>             <span class="n">response</span> <span class="o">=</span> <span class="n">meth</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">533</span> 
<span class="g g-Whitespace">    </span><span class="mi">534</span>         <span class="k">return</span> <span class="n">response</span>

<span class="nn">~/miniconda3/envs/ioos/lib/python3.6/urllib/request.py</span> in <span class="ni">http_response</span><span class="nt">(self, request, response)</span>
<span class="g g-Whitespace">    </span><span class="mi">640</span>         <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">200</span> <span class="o">&lt;=</span> <span class="n">code</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">641</span>             <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
<span class="ne">--&gt; </span><span class="mi">642</span>                 <span class="s1">&#39;http&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">hdrs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">643</span> 
<span class="g g-Whitespace">    </span><span class="mi">644</span>         <span class="k">return</span> <span class="n">response</span>

<span class="nn">~/miniconda3/envs/ioos/lib/python3.6/urllib/request.py</span> in <span class="ni">error</span><span class="nt">(self, proto, *args)</span>
<span class="g g-Whitespace">    </span><span class="mi">568</span>         <span class="k">if</span> <span class="n">http_err</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">569</span>             <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="s1">&#39;http_error_default&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">orig_args</span>
<span class="ne">--&gt; </span><span class="mi">570</span>             <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_chain</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">571</span> 
<span class="g g-Whitespace">    </span><span class="mi">572</span> <span class="c1"># XXX probably also want an abstract factory that knows when it makes</span>

<span class="nn">~/miniconda3/envs/ioos/lib/python3.6/urllib/request.py</span> in <span class="ni">_call_chain</span><span class="nt">(self, chain, kind, meth_name, *args)</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>         <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">handlers</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">503</span>             <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">meth_name</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">504</span>             <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>             <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">506</span>                 <span class="k">return</span> <span class="n">result</span>

<span class="nn">~/miniconda3/envs/ioos/lib/python3.6/urllib/request.py</span> in <span class="ni">http_error_default</span><span class="nt">(self, req, fp, code, msg, hdrs)</span>
<span class="g g-Whitespace">    </span><span class="mi">648</span> <span class="k">class</span> <span class="nc">HTTPDefaultErrorHandler</span><span class="p">(</span><span class="n">BaseHandler</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">649</span>     <span class="k">def</span> <span class="nf">http_error_default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">req</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">hdrs</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">650</span>         <span class="k">raise</span> <span class="n">HTTPError</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">full_url</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">hdrs</span><span class="p">,</span> <span class="n">fp</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">651</span> 
<span class="g g-Whitespace">    </span><span class="mi">652</span> <span class="k">class</span> <span class="nc">HTTPRedirectHandler</span><span class="p">(</span><span class="n">BaseHandler</span><span class="p">):</span>

<span class="ne">HTTPError</span>: HTTP Error 404: Not Found
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="lets-plot-up-what-we-have-found">
<h2>Lets plot up what we have found<a class="headerlink" href="#lets-plot-up-what-we-have-found" title="Permalink to this headline">¶</a></h2>
<p>Now that we have all the ISO metadata records we are interested in, it’s time to do something fun with them. In this example we want to generate a timeseries plot of the data coverage for the “Southern California Coastal Ocean Observing System” stations we have archived at NCEI.</p>
<p>First we set up the figure and import some modules to facilitate plotting and string parsing.</p>
<p>Next, we loop through each iso record to collect metadata information about each package. The example here shows how to collect the following items:</p>
<ol class="simple">
<li><p>NCEI Archival Information Package (AIP) Accession ID (7-digit Accession Number)</p></li>
<li><p>The first date the archive package was published.</p></li>
<li><p>The platform code identified from the provider.</p></li>
<li><p>The version number and date it was published.</p></li>
<li><p>The current AIP size, in MB.</p></li>
<li><p>The bounding time, for each AIP found.</p></li>
</ol>
<p>There are plenty of other metadata elements to collect from the ISO records, so we recommend browsing to one of the records and having a look at the items of interest to your community.</p>
<p>Then, the process plots each AIP as a timeseries showing the time coverage.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Process each iso record.</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="k">as</span> <span class="nn">mdates</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">owslib</span> <span class="kn">import</span> <span class="n">util</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>

<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">accenos</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># For each accession in geo.rss response.</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iso_record</span><span class="p">:</span>
    <span class="c1"># Opens the iso xml web reference.</span>
    <span class="n">iso_url</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="c1"># Creates tree element.</span>
    <span class="n">iso_tree</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">urlopen</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
    <span class="c1"># Gets the root from tree element.</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">iso_tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
    <span class="c1"># Pulls out identifier string.</span>
    <span class="n">ident</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
        <span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="s2">&quot;gmd:fileIdentifier/gco:CharacterString&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="c1"># Pulls out 7-digit accession number from identifier.</span>
    <span class="n">acce</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">&quot;[0-9]</span><span class="si">{7}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">util</span><span class="o">.</span><span class="n">testXMLValue</span><span class="p">(</span><span class="n">ident</span><span class="p">))</span>
    <span class="c1"># Adds accession number to accenos list.</span>
    <span class="n">accenos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">acce</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Accession Number = </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">acce</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

    <span class="c1"># Collect Publication date information.</span>
    <span class="n">date_path</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;gmd:identificationInfo/&quot;</span>
        <span class="s2">&quot;gmd:MD_DataIdentification/&quot;</span>
        <span class="s2">&quot;gmd:citation/&quot;</span>
        <span class="s2">&quot;gmd:CI_Citation/&quot;</span>
        <span class="s2">&quot;gmd:date/&quot;</span>
        <span class="s2">&quot;gmd:CI_Date/&quot;</span>
        <span class="s2">&quot;gmd:date/gco:Date&quot;</span>
    <span class="p">)</span>
    <span class="c1"># First published date.</span>
    <span class="n">pubdate</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="n">date_path</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;First published date = </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">util</span><span class="o">.</span><span class="n">testXMLValue</span><span class="p">(</span><span class="n">pubdate</span><span class="p">))</span>

    <span class="c1"># Collect Provider Platform Codes (if it has it).</span>
    <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">getiterator</span><span class="p">(</span><span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="s2">&quot;gco:CharacterString&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">tag</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Provider Platform Codes&quot;</span><span class="p">:</span>
            <span class="c1"># Backs up to the MD_keywords element.</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">tag</span><span class="o">.</span><span class="n">getparent</span><span class="p">()</span><span class="o">.</span><span class="n">getparent</span><span class="p">()</span><span class="o">.</span><span class="n">getparent</span><span class="p">()</span><span class="o">.</span><span class="n">getparent</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span>
                <span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="s2">&quot;gmd:keyword/gco:CharacterString&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Provider Platform Code = </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

    <span class="c1"># Pull out the version information.</span>
    <span class="c1"># Iterate through each processing step which is an NCEI version.</span>
    <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">getiterator</span><span class="p">(</span><span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="s2">&quot;gmd:processStep&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)):</span>
        <span class="c1"># Only parse gco:DateTime and gmd:title/gco:CharacterString.</span>
        <span class="n">vers_title</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;gmi:LE_ProcessStep/&quot;</span>
            <span class="s2">&quot;gmi:output/&quot;</span>
            <span class="s2">&quot;gmi:LE_Source/&quot;</span>
            <span class="s2">&quot;gmd:sourceCitation/&quot;</span>
            <span class="s2">&quot;gmd:CI_Citation/&quot;</span>
            <span class="s2">&quot;gmd:title/gco:CharacterString&quot;</span>
        <span class="p">)</span>
        <span class="n">vers_date</span> <span class="o">=</span> <span class="s2">&quot;gmi:LE_ProcessStep/&quot;</span> <span class="s2">&quot;gmd:dateTime/gco:DateTime&quot;</span>
        <span class="k">if</span> <span class="n">tag</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="n">vers_date</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">))</span> <span class="ow">and</span> <span class="n">tag</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span>
            <span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="n">vers_title</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="c1"># Extract dateTime for each version.</span>
            <span class="n">datetimes</span> <span class="o">=</span> <span class="n">tag</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="n">vers_date</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">))</span>
            <span class="c1"># Extract title string (contains version number).</span>
            <span class="n">titles</span> <span class="o">=</span> <span class="n">tag</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="n">vers_title</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> = &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">util</span><span class="o">.</span><span class="n">testXMLValue</span><span class="p">(</span><span class="n">titles</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">util</span><span class="o">.</span><span class="n">testXMLValue</span><span class="p">(</span><span class="n">datetimes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="c1"># Collect package size information.</span>
    <span class="c1"># Iterate through transfersize nodes.</span>
    <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">getiterator</span><span class="p">(</span><span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="s2">&quot;gmd:transferSize&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)):</span>
        <span class="c1"># Only go into first gco:Real (where size exists).</span>
        <span class="k">if</span> <span class="n">tag</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="s2">&quot;gco:Real&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">))</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
            <span class="c1"># Extract size.</span>
            <span class="n">sizes</span> <span class="o">=</span> <span class="n">tag</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="s2">&quot;gco:Real&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Current AIP Size = </span><span class="si">%s</span><span class="s2"> MB&quot;</span> <span class="o">%</span> <span class="n">sizes</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">break</span>
        <span class="c1"># Only use first size instance, all gco:Real attributes are the same.</span>
        <span class="k">break</span>

    <span class="c1"># Bounding time for AIP.</span>
    <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">getiterator</span><span class="p">(</span><span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="s2">&quot;gml:TimePeriod&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)):</span>
        <span class="c1"># If text exists in begin or end position nodes.</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">tag</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="s2">&quot;gml:beginPosition&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">))</span><span class="o">.</span><span class="n">text</span>
            <span class="ow">and</span> <span class="n">tag</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="s2">&quot;gml:endPosition&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">))</span><span class="o">.</span><span class="n">text</span>
        <span class="p">):</span>
            <span class="n">start_date</span> <span class="o">=</span> <span class="n">tag</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
                <span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="s2">&quot;gml:beginPosition&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">text</span>
            <span class="n">end_date</span> <span class="o">=</span> <span class="n">tag</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">util</span><span class="o">.</span><span class="n">nspath_eval</span><span class="p">(</span><span class="s2">&quot;gml:endPosition&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">))</span><span class="o">.</span><span class="n">text</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bounding Time = </span><span class="si">%s</span><span class="s2"> TO </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">))</span>

    <span class="c1"># Plotting routine for each accession, plot start-end as timeseries for each accession.</span>
    <span class="c1"># Create datetime objects for start_date and end_date.</span>
    <span class="n">date1</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span>
        <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]),</span>
        <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]),</span>
        <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="n">date2</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span>
        <span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]),</span>
        <span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]),</span>
        <span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="n">dates</span> <span class="o">=</span> <span class="p">[</span><span class="n">date1</span><span class="p">,</span> <span class="n">date2</span><span class="p">]</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Counter for plotting.</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span>
    <span class="c1"># Plot the timeseries.</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot_date</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">dates</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">6.0</span><span class="p">)</span>

<span class="c1"># Clean up the plot.</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">years</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">YearLocator</span><span class="p">()</span>
<span class="n">months</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">MonthLocator</span><span class="p">()</span>
<span class="n">yearsFmt</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&quot;%Y&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">years</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">yearsFmt</span><span class="p">)</span>  <span class="c1"># Format the xaxis labels.</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">months</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s2">&quot;bottom&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">yticks</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">accenos</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s2">&quot;out&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">accenos</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;NCEI Accession Number&quot;</span><span class="p">)</span>
<span class="n">title</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> Data Archived at NCEI&quot;</span> <span class="o">%</span> <span class="n">ra</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Accession Number = 0157035
First published date = 2016-11-23
NCEI Accession 0157035 v1.1 = 
NCEI Accession 0157035 v2.2 = 
NCEI Accession 0157035 v3.3 = 
Current AIP Size = 52.084 MB
Bounding Time = 2005-06-16 TO 2016-12-31

Accession Number = 0157036
First published date = 2016-11-23
NCEI Accession 0157036 v1.1 = 
NCEI Accession 0157036 v2.2 = 
NCEI Accession 0157036 v3.3 = 
Current AIP Size = 48 MB
Bounding Time = 2005-09-16 TO 2016-12-31

Accession Number = 0157016
First published date = 2016-11-22
NCEI Accession 0157016 v1.1 = 
NCEI Accession 0157016 v2.2 = 
Current AIP Size = 52.208 MB
Bounding Time = 2005-06-16 TO 2015-07-13

Accession Number = 0157034
First published date = 2016-11-23
NCEI Accession 0157034 v1.1 = 
NCEI Accession 0157034 v2.2 = 
NCEI Accession 0157034 v3.3 = 
Current AIP Size = 89.956 MB
Bounding Time = 2005-06-16 TO 2016-12-31
</pre></div>
</div>
<img alt="../../../_images/2017-06-12-NCEI_RA_archive_history_9_1.png" src="../../../_images/2017-06-12-NCEI_RA_archive_history_9_1.png" />
</div>
</div>
<p>This procedure has been developed as an example of how to use NCEI’s geoportal REST API’s to collect information about packages that have been archived at NCEI. The intention is to provide some guidance and ways to collect this information without having to request it directly from NCEI. There are a significant amount of metadata elements which NCEI makes available through their ISO metadata records. Therefore, anyone interested in collecting other information from the records at NCEI should have a look at the ISO metadata records and determine which items are of interest to their community. Then, update the example code provided to collect that information.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "executablebooks/jupyter-book",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/Code Gallery/data_collection"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="2017-03-21-ERDDAP_IOOS_Sensor_Map.html" title="previous page">Read realtime data from IOOS Sensor Map via ERDDAP tabledap</a>
    <a class='right-next' id="next-link" href="2017-07-25-HFRadar_currents.html" title="next page">Near real-time HF-Radar currents in the proximity of the Deepwater Horizon site</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By IOOS<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>